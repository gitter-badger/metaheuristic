source:
  uid: source-code-for-batch-processing-1:0
  variables:
    startInputAs: input-data
  processes:
    - code: mh.variable-splitter
      name: mh.variable-splitter
      function:
        code: mh.variable-splitter
        context: internal
      inputs:
        - name: input-data
      outputs:
        - name: batch-item
      subProcesses:
        logic: and
        processes:
          - code: fileless
            name: fileless
            function:
              code: fileless-function:1.0
            inputs:
              - name: batch-item
            outputs:
              - name: processed-file
    - code: mh.batch-result-processor
      name: baatch result processor
      function:
        code: mh.batch-result-processor
        context: internal
      metas:
        - key: batch-item
          value: batch-item
#    - code: mh.aggregate
#      name: mh.aggregate
#      function:
#        code: mh.aggregate
#        context: internal
#      inputs:
#        - name: processed-file
#      outputs:
#        - name: batch-result
version: 1