source:
  uid: source-code-for-batch-processing-1:0
  variables:
    startInputAs: input-data
  metas:
    - batch-result: var-batch-result
    - batch-status: var-batch-status
  processes:
    - code: mh.batch-splitter
      name: mh.batch-splitter
      function:
        code: mh.batch-splitter
        context: internal
      metas:
        - variable-for-splitting: input-data
        - output-is-dynamic: true
        - output-variable: var-batch-item
#      error-scope: process
      subProcesses:
        logic: sequential
        processes:
          - code: mh.nop-1
            name: nop 1
            function:
              code: mh.nop
              context: internal
          - code: fileless
            name: fileless
            function:
              code: fileless-function:1.0
            inputs:
              - name: var-batch-item
                array: true
            outputs:
              - name: var-processed-file
              - name: var-processing-status
              - name: var-item-mapping
            metas:
              - batch-item-result: var-batch-result
              - batch-item-status: var-processing-status
              - batch-item-mapping: var-item-mapping
          - code: mh.nop-2
            name: nop 2
            function:
              code: mh.nop
              context: internal
    - code: mh.batch-result-processor
      name: batch result processor
      function:
        code: mh.batch-result-processor
        context: internal
      outputs:
        - name: var-batch-result
        - name: var-batch-status
      metas:
        - batch-items: var-processed-file, var-processing-status
        - batch-result: var-batch-result
        - batch-status: var-batch-status
        - batch-item-mappings: var-item-mapping, var-item-mapping
version: 1