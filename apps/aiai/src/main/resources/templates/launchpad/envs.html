<div layout:fragment="content" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
     xmlns:th="http://www.thymeleaf.org"
     layout:decorate="~{layout-launchpad}"
     th:if="${#bools.isTrue(@environment.getProperty('aiai.launchpad.enabled'))}"
>
    <p>&nbsp;</p>
    <p class="error-msg" th:if="${!#strings.isEmpty(errorMessage)}" th:text="${errorMessage}"></p>
    <p th:if="${#strings.isEmpty(errorMessage)}">&nbsp;</p>

    <!-- ==================================== New env ==================================== -->

    <h2 class="widget-header">Environment definition</h2>
    <form class="pure-form pure-form-stacked" method="post" action="#" th:method="POST"
          th:action="@{/launchpad/register-new-env-commit}" accept-charset="UTF-8"
          id="dataset-form" name="f">
        <fieldset>
            <label for="env">Environment</label>
            <input size="90" name="env" id="env" type="text" placeholder="Enter environment data">
            <span class="pure-form-message">This is a required field.</span>

            <label for="signature">Signature</label>
            <textarea name="signature" id="signature" placeholder="signature" cols="100" rows="10" maxlength="1000"></textarea>
            <span class="pure-form-message">This is a required field.</span>

            <p>&nbsp;</p>
            <button type="submit" class="pure-button pure-button-primary">Create new environment definition</button>
        </fieldset>
    </form>
    <p>&nbsp;</p>

    <!--/*@thymesVar id="result" type="aiai.ai.launchpad.env.EnvController.Result"*/-->
    <table class="pure-table pure-table-bordered" id="table-ds-path-cols">
        <thead>
        <tr>
            <th>#</th>
            <th>Key</th>
            <th>Value</th>
            <th>Is signed?</th>
            <th colspan="1">&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="e : ${result.envs}">
            <td th:text="${e.id}">#Id</td>
            <td th:text="${e.key}">Key</td>
            <td th:text="${e.value}">Value</td>
            <td th:text="${e.signature!=null ? 'Yes' : 'No'}">Is signed?</td>
            <td><a class="pure-button pure-button-primary" th:href="${'/launchpad/env-delete/' + e.id}">Delete</a></td>
        </tr>
        </tbody>
    </table>
    <p>&nbsp;</p>

</div>
